sudo: false

language: android

before_install:
- chmod +x gradlew

licenses:
- '.+'

env:
 global:
 - ANDROID_API_LEVEL=27
 - ANDROID_EMULATOR_LEVEL=21
 - ANDROID_BUILD_TOOLS_VERSION=27.0.3
 - ANDROID_ABI=armeabi-v7a
 - ANDROID_TAG=google_apis
 - ADB_INSTALL_TIMEOUT=20

jdk:
 - oraclejdk8

before_script:
- echo no | android create avd --force --name test --target android-21 --abi armeabi-v7a
- emulator -avd test -no-skin -no-audio -no-window &
- android-wait-for-emulator
- adb shell input keyevent 82 &

android:
 components:
 # Uncomment the lines below if you want to
 # use the latest revision of Android SDK Tools
 # - tools
 # - platform-tools

 # The BuildTools version used by your project
 - build-tools-28.0.3

 # The SDK version used to compile your project
 - android-28

 # Additional components

 # Specify at least one system image,
 # if you need to run emulator(s) during your tests
